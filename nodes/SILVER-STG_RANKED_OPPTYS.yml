fileVersion: 1
id: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
name: STG_RANKED_OPPTYS
operation:
  config:
    insertStrategy: INSERT
    postSQL: ""
    preSQL: ""
    testsEnabled: true
    truncateBefore: true
  database: ""
  deployEnabled: true
  description: Union of ranked opportunities from CBR and NR
  isMultisource: false
  locationName: SILVER
  materializationType: table
  metadata:
    appliedNodeTests: []
    columns:
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c4c653b6-c382-4d51-8654-638af0233681
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: DATE
        description: ""
        name: DAY_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: c4c653b6-c382-4d51-8654-638af0233681
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"DAY_DATE\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 52abed91-121e-4988-990e-270f32734ef2
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: VARCHAR
        description: ""
        name: SALES_TEAM_REPORTING
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 52abed91-121e-4988-990e-270f32734ef2
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"SALES_TEAM_REPORTING\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 2ca5cb85-c7d7-468f-a6a3-60fabfa37256
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: VARCHAR
        description: ""
        name: ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 2ca5cb85-c7d7-468f-a6a3-60fabfa37256
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"ID\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 1c2efae4-2e9f-4ab9-963a-b633dd8356c0
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: VARCHAR
        description: ""
        name: ACCOUNT_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 1c2efae4-2e9f-4ab9-963a-b633dd8356c0
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"ACCOUNT_ID\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 9639e40d-f2a5-45a8-81d2-ecd437cfd5e4
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: TIMESTAMP
        description: ""
        name: CREATED_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 9639e40d-f2a5-45a8-81d2-ecd437cfd5e4
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"CREATED_DATE\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 7670769b-0e84-47cd-9169-13fbe49152e8
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: DATE
        description: ""
        name: CLOSE_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 7670769b-0e84-47cd-9169-13fbe49152e8
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"CLOSE_DATE\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c770b003-f251-48ca-b0a4-1b2b6ade333a
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: VARCHAR
        description: ""
        name: NAME
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: c770b003-f251-48ca-b0a4-1b2b6ade333a
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"NAME\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: d95bc9c6-2a30-4a01-a387-929a724c29b8
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: NUMBER
        description: ""
        name: NET_NEW_ACV
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: d95bc9c6-2a30-4a01-a387-929a724c29b8
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"NET_NEW_ACV\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 96f1097d-89b8-4b13-9f88-17ba762cc48b
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: VARCHAR
        description: ""
        name: STAGE_NAME
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 96f1097d-89b8-4b13-9f88-17ba762cc48b
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"STAGE_NAME\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 7a83748f-91c0-4f30-88ce-fef6eba5b564
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: VARCHAR
        description: ""
        name: OWNER_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 7a83748f-91c0-4f30-88ce-fef6eba5b564
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"OWNER_ID\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: d5ef49d6-955f-4814-8b80-4762db0821cc
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: VARCHAR
        description: ""
        name: SALES_TEAM
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: d5ef49d6-955f-4814-8b80-4762db0821cc
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"SALES_TEAM\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 00a44d39-f339-41be-9dd5-4a7b5fe132da
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: VARCHAR
        description: ""
        name: PRM_PARTNER_LEVEL
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 00a44d39-f339-41be-9dd5-4a7b5fe132da
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"PRM_PARTNER_LEVEL\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: c9066c48-3ae3-44e1-883b-17c8f43ecc4d
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: TIMESTAMP
        description: ""
        name: DBT_VALID_FROM
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: c9066c48-3ae3-44e1-883b-17c8f43ecc4d
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"DBT_VALID_FROM\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 1d81d5d0-6f61-4170-919f-c9f681c15e27
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: TIMESTAMP
        description: ""
        name: DBT_VALID_TO
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 1d81d5d0-6f61-4170-919f-c9f681c15e27
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"DBT_VALID_TO\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: d4fb1684-6840-4b6d-83f3-7d358ac00c29
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: VARCHAR
        description: ""
        name: MULTI_YEAR_SUBSCRIPTION
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: d4fb1684-6840-4b6d-83f3-7d358ac00c29
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"MULTI_YEAR_SUBSCRIPTION\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 3b8cd443-efed-41e2-b961-e3e787e0ee2b
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: VARCHAR
        description: ""
        name: TERRITORY
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 3b8cd443-efed-41e2-b961-e3e787e0ee2b
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"TERRITORY\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 1a396dc2-6c18-40a0-b5d7-6daeb5cd69a5
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: VARCHAR
        description: ""
        name: PARTNER_TYPE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 1a396dc2-6c18-40a0-b5d7-6daeb5cd69a5
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"PARTNER_TYPE\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 48994adb-d3ef-4180-91bb-d9b828f400bd
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: VARCHAR
        description: ""
        name: OPPORTUNITY_OWNER
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 48994adb-d3ef-4180-91bb-d9b828f400bd
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"OPPORTUNITY_OWNER\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: f73f4b77-e64e-4d5c-8411-b64110bd8222
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: VARCHAR
        description: ""
        name: SUB_TEAM
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: f73f4b77-e64e-4d5c-8411-b64110bd8222
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"SUB_TEAM\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 5aab7f19-3bf8-439c-8a2e-5c565ea3eff9
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: VARCHAR
        description: ""
        name: USER_ROLE_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 5aab7f19-3bf8-439c-8a2e-5c565ea3eff9
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"USER_ROLE_ID\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: d62d484d-8d4c-4d97-95d6-a15359963873
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: VARCHAR
        description: ""
        name: OWNER_ROLE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: d62d484d-8d4c-4d97-95d6-a15359963873
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"OWNER_ROLE\""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: bd4a53c0-be8e-4e04-ba96-3b3cac16f3fb
          stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
        config: {}
        dataType: TIMESTAMP
        description: ""
        name: VALID_DATE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: bd4a53c0-be8e-4e04-ba96-3b3cac16f3fb
                stepCounter: b86f0b52-4a70-4c7a-934d-dc092f7aa4fc
            transform: "\"VALID_DATE\""
    cteString: ""
    description: ""
    destinationName: ""
    enabledColumnTestIDs: []
    materializationOption: ""
    sourceMapping:
      - aliases: {}
        customSQL:
          customSQL: ""
        dependencies:
          - locationName: SILVER
            nodeName: STG_CBR
          - locationName: SILVER
            nodeName: STG_NR
        join:
          joinCondition: |-
            FROM (
                SELECT * FROM {{ ref('SILVER', 'STG_CBR') }} "STG_CBR" WHERE "ROW_NUM" = 1
                UNION ALL
                SELECT * FROM {{ ref('SILVER', 'STG_NR') }} "STG_NR" WHERE "ROW_NUM" = 1
            ) "RANKED_OPPTYS"
        name: STG_CBR_NR
        noLinkRefs: []
  name: STG_RANKED_OPPTYS
  overrideSQL: false
  schema: ""
  sqlType: Stage
  type: sql
  version: 1
type: Node
